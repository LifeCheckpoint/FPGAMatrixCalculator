# 数字存储RAM模块

## 模块概述

`num_storage_ram` 是一个双端口RAM模块，用于存储转换后的32位有符号整数。该模块支持同时进行读写操作。

## 参数说明

| 参数名 | 默认值 | 说明 |
|--------|--------|------|
| DATA_WIDTH | 32 | 数据位宽 |
| DEPTH | 2048 | 存储深度 |
| ADDR_WIDTH | 11 | 地址位宽（$clog2(DEPTH)） |

## 接口定义

### 输入信号

| 信号名 | 位宽 | 说明 |
|--------|------|------|
| clk | 1 | 时钟信号 |
| rst_n | 1 | 异步低电平复位 |
| wr_en | 1 | 写使能信号 |
| wr_addr | ADDR_WIDTH | 写地址 |
| wr_data | DATA_WIDTH | 写数据 |
| rd_addr | ADDR_WIDTH | 读地址 |

### 输出信号

| 信号名 | 位宽 | 说明 |
|--------|------|------|
| rd_data | DATA_WIDTH | 读数据输出 |

## 功能说明

### 写操作
- 当 `wr_en` 为高电平时，在时钟上升沿将 `wr_data` 写入 `wr_addr` 指定的地址
- 写操作为同步写入

### 读操作
- 读操作为同步读取，有一个时钟周期的延迟
- 复位时输出清零

## 时序特性

- **写延迟**：1个时钟周期（同步写入）
- **读延迟**：1个时钟周期（寄存器输出）
- **读写冲突**：同时读写同一地址时，读出的是旧数据

## 使用示例

```systemverilog
// 写入数据
@(posedge clk);
wr_en <= 1'b1;
wr_addr <= 11'd0;
wr_data <= 32'd123;

@(posedge clk);
wr_en <= 1'b0;

// 读取数据
@(posedge clk);
rd_addr <= 11'd0;

@(posedge clk);  // 等待读延迟
@(posedge clk);
// 此时 rd_data 中包含读取的数据
```

## 资源占用

- **BRAM**: 1块 (2048×32 = 64Kbit)
- **逻辑资源**: 极少（仅地址和控制逻辑）

## 注意事项

1. **读延迟**：读操作有1个周期延迟，需要在读地址设置后等待一个时钟周期才能获取有效数据
2. **复位行为**：复位时仅清零输出寄存器，不清空内存内容
3. **读写冲突**：建议避免在同一时钟周期对同一地址进行读写操作
4. **地址范围**：确保地址在有效范围内（0到DEPTH-1），否则可能导致不可预测的行为

## 测试验证

测试文件：`modules/ascii_num_sep/sim/num_storage_ram_tb.sv`

测试用例包括：
- 基本读写操作
- 顺序写入和读取
- 负数存储
- 地址覆盖
- 边界地址测试
- 大数值测试
- 并发读写
